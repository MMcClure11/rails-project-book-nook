<div class="d-flex justify-content-around row-hl p-2">
    <div class="card border-dark" style="width: 25rem;" style="display:flex">
      <div class="card-content text-center">
        <div class="h5 card-title text-dark"><%= @book.title %></div>
          <h4>Author: <%= @book.author %></h4>
          <h4>Year Published: <%= @book.year_published %></h4>
           <h4>Page Count: <%= @book.page_count %></h4>
          <h4>Description:</h4>
          <p class="text-left p-2"> <%= @book.description %></p>
        </div>
        <div class="card-footer text-muted text-center bg-dark">
          <% @book.lists.each do |list| %>
            <% if list.user == current_user %>
              <p>Reading List: <%= link_to list.name, list, class: 'text-info' %></p>
            <% end %>
          <% end %> 

<%= form_with model: @book, local: true do |f| %>
<% lists = [] %>
  <% current_user.lists.each do |list| %>
    <% lists << list if !list.books.include?(@book) %>
  <% end %>
  <%= f.collection_check_boxes :list_ids, lists, :id, :name, :include_hidden => false  %>
  <%#= f.collection_select :list_ids, current_user.lists, :id, :name, :include_hidden => false  %>
  <% if !lists.empty? %>
    <%= f.submit "Add Book to List(s)"%>
  <% end %>
<% end %>

<% if @book.can_edit_and_delete? %>
<%= button_to "Edit Book", edit_book_path(@book), method: :get, class: "btn btn-outline-info m-1" %>
<%= button_to "Delete", book_path(@book), method: :delete, data: { confirm: "Are you sure?"}, class: "btn btn-outline-info m-1" %>
<% end %>
      
        </div>
      </div>

<div class="p-4 item-hl">
  <% if !@book.reviews.present? %>
    <p class="text-center">Be the first to review this book!</p>
  <% else %>

  <div class="card border-dark mb-4" style="width: 25 rem;" style="display:flex">
    <p class="card-header text-center bg-dark text-info"> Book Nook Rating: <%= @book.reviews.average(:rating).round %></p>
    <div class="card-body text-center">
      <h6 class="card-title">Book Reviews for <%= @book.title %></h6>
      <ul class="list-group list-group-flush">
        <% @book.reviews.recent(5).each do |review| %>
          <li class="list-group-item"><%= stars(review.rating) %> <br> <%= review.content %><br>Reviewed By: <%= review.user.username %><br><%= display_created_at(review.created_at)%><br></li>
        <% end %>
    </div>
    <div class="card-footer text-center bg-dark text-warning">
      <div> <%= link_to "View all Reviews", book_reviews_path(@book), class: "text-info" %>
    </div>
  </div>  
  <% end %>
    
  <% if current_user.reviews.where(book_id: @book.id).empty? %>
    <div class= "font-weight-bold text-dark h5 text-center pb-3"> Review <%= link_to @book.title, new_book_review_path(@book), class: 'text-info'%>  </div>
  <% end %>

</div>



